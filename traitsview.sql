drop view if exists traitsview;
create view traitsview as select traits.id as trait_id, traits.citation_id, traits.site_id, traits.treatment_id, sites.sitename as site, sites.city, sites.lat, sites.lon, species.scientificname, species.genus, citations.author as author, citations.year as cityear, treatments.name as trt, date, month(date) as month, year(date) as year, variables.name as trait, mean, n, statname, stat, traits.notes, users.name as user from traits join sites on traits.site_id = sites.id join species on traits.specie_id = species.id join citations on traits.citation_id = citations.id join treatments on traits.treatment_id = treatments.id join variables on traits.variable_id = variables.id join users on traits.user_id = users.id;
